{% extends "base.html" %}
{% load static %}
{% load torneo_extras %}
{% block title %}Mis Torneos - TodoPadel{% endblock %}
{% block content_title %}
    <h1 class="text-3xl md:text-4xl font-bold text-base-content mb-2 flex items-center gap-3">
        <svg xmlns="http://www.w3.org/2000/svg"
             class="h-8 w-8 text-primary"
             fill="none"
             viewBox="0 0 24 24"
             stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
        </svg>
        Mis Torneos
    </h1>
    <p class="text-base-content/70">Gestioná y revisá todos los torneos en los que participás.</p>
{% endblock %}
{% block content %}
    <div class="space-y-12">
        <!-- Pestañas para segmentar los torneos -->
        <div role="tablist"
             class="tabs tabs-lifted tabs-lg shadow-sm bg-base-100 rounded-t-2xl overflow-hidden p-2">
            <input type="radio"
                   name="mis_torneos_tabs"
                   role="tab"
                   class="tab font-bold {% if torneos_en_juego or not torneos_abiertos %}tab-active{% endif %}"
                   aria-label="En Juego ({{ torneos_en_juego|length }})"
                   {% if torneos_en_juego or not torneos_abiertos %}checked{% endif %} />
            <div role="tabpanel"
                 class="tab-content bg-base-100 border-base-300 rounded-box p-6 mt-4 border-2">
                {% if torneos_en_juego %}
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        {% for torneo in torneos_en_juego %}
                            {% include "torneos/partials/torneo_card.html" with torneo=torneo %}
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="text-center py-12 px-4 rounded-3xl bg-base-200/50 border-2 border-dashed border-base-300">
                        <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-base-100 shadow-sm mb-4 text-base-content/30">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 class="h-8 w-8"
                                 fill="none"
                                 viewBox="0 0 24 24"
                                 stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-base-content mb-2">Sin torneos en juego</h3>
                        <p class="text-base-content/60 max-w-sm mx-auto">
                            Actualmente no estás disputando ningún torneo. ¡Revisá las inscripciones abiertas para sumarte a uno!
                        </p>
                    </div>
                {% endif %}
            </div>
            <input type="radio"
                   name="mis_torneos_tabs"
                   role="tab"
                   class="tab font-bold {% if torneos_abiertos and not torneos_en_juego %}tab-active{% endif %}"
                   aria-label="Inscripciones ({{ torneos_abiertos|length }})"
                   {% if torneos_abiertos and not torneos_en_juego %}checked{% endif %} />
            <div role="tabpanel"
                 class="tab-content bg-base-100 border-base-300 rounded-box p-6 mt-4 border-2">
                {% if torneos_abiertos %}
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        {% for torneo in torneos_abiertos %}
                            {% include "torneos/partials/torneo_card.html" with torneo=torneo %}
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="text-center py-12 px-4 rounded-3xl bg-base-200/50 border-2 border-dashed border-base-300">
                        <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-base-100 shadow-sm mb-4 text-base-content/30">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 class="h-8 w-8"
                                 fill="none"
                                 viewBox="0 0 24 24"
                                 stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-base-content mb-2">No estás inscripto en torneos abiertos</h3>
                        <p class="text-base-content/60 max-w-sm mx-auto mb-6">
                            No tenés inscripciones activas en torneos que estén por comenzar.
                        </p>
                        <a href="{% url 'torneos:abierto_list' %}"
                           class="btn btn-primary shadow-sm hover:shadow-md transition-shadow">
                            Ver Torneos Disponibles
                        </a>
                    </div>
                {% endif %}
            </div>
            <input type="radio"
                   name="mis_torneos_tabs"
                   role="tab"
                   class="tab font-bold"
                   aria-label="Historial ({{ torneos_finalizados|length }})" />
            <div role="tabpanel"
                 class="tab-content bg-base-100 border-base-300 rounded-box p-6 mt-4 border-2">
                {% if torneos_finalizados %}
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        {% for torneo in torneos_finalizados %}
                            {% include "torneos/partials/torneo_card.html" with torneo=torneo %}
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="text-center py-12 px-4 rounded-3xl bg-base-200/50 border-2 border-dashed border-base-300">
                        <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-base-100 shadow-sm mb-4 text-base-content/30">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 class="h-8 w-8"
                                 fill="none"
                                 viewBox="0 0 24 24"
                                 stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold text-base-content mb-2">Tu historial está vacío</h3>
                        <p class="text-base-content/60 max-w-sm mx-auto">
                            Cuando termines de participar en algun torneo, va a aparecer reflejado acá.
                        </p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}
