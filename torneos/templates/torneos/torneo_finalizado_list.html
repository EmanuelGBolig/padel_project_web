{% extends "base.html" %}
{% block title %}
    Historial de Torneos
{% endblock title %}
{% block content %}
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 mt-8">
        <h2 class="text-3xl font-bold text-base-content mb-6 text-center">Historial de Torneos Finalizados</h2>
        <div class="grid grid-cols-1 sm:grid-cols-1 md:grid-cols-1 gap-4">
            {% for torneo in torneos_finalizados %}
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 border border-base-300 dark:border-base-100/10 rounded-xl p-4 sm:p-6 shadow-sm hover:shadow-md transition-shadow bg-base-100">
                    <!-- Info torneo -->
                    <div class="flex-1 w-full">
                        <div class="flex items-center gap-4 mb-4">
                            <div class="avatar">
                                <div class="w-12 h-12 rounded-full ring ring-base-content/20 ring-offset-base-100 ring-offset-2 bg-base-100 overflow-hidden">
                                    {% if torneo.organizacion.logo %}
                                        <img src="{{ torneo.organizacion.logo.url }}"
                                             alt="{{ torneo.organizacion.nombre }}"
                                             width="48"
                                             height="48" />
                                    {% else %}
                                        <span class="text-sm font-bold text-base-content/40 flex items-center justify-center h-full">{{ torneo.organizacion.nombre|slice:":2"|upper }}</span>
                                    {% endif %}
                                </div>
                            </div>
                            <div>
                                <h3 class="text-xl sm:text-2xl font-semibold text-base-content leading-none">{{ torneo.nombre }}</h3>
                                <span class="text-xs opacity-50 uppercase tracking-widest font-bold">Organizado por {{ torneo.organizacion.nombre }}</span>
                            </div>
                        </div>
                        <p class="text-base-content/90 mt-1 text-sm sm:text-base">
                            <span class="font-medium">División:</span> {{ torneo.division.nombre }}
                            <br>
                            <span class="font-medium">Finalizado el:</span> {{ torneo.fecha_fin|default:torneo.fecha_inicio|date:"d M Y" }}
                            {% if torneo.ganador_del_torneo %}
                                <br>
                                <span class="font-medium text-success">Ganador:</span> <span class="text-success">{{ torneo.ganador_del_torneo.nombre }}</span>
                            {% endif %}
                        </p>
                    </div>
                    <!-- Botón -->
                    <div class="self-end md:self-center w-full md:w-auto mt-2 md:mt-0">
                        <a href="{% url 'torneos:detail' torneo.pk %}"
                           class="btn btn-primary w-full md:w-auto px-4 py-2 rounded-lg font-medium shadow text-sm sm:text-base">
                            Ver Resultados
                        </a>
                    </div>
                </div>
            {% empty %}
                <p class="text-base-content/70 text-center mt-6">Aún no hay torneos finalizados.</p>
            {% endfor %}
        </div>
        {% if is_paginated %}
            <div class="mt-6 flex justify-center">
                <!-- Aquí podés poner tu paginación si la agregás -->
            </div>
        {% endif %}
    </div>
{% endblock content %}
