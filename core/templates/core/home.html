{% extends "base.html" %}
{% block title %}Inicio - PadelApp{% endblock %}
{% block content %}
    <div class="flex flex-col gap-12">
        <!-- Hero -->
        <!-- Hero -->
        <div class="text-center py-12 bg-base-200/30 rounded-3xl border border-base-300/30">
            <div class="max-w-3xl mx-auto">
                <h1 class="text-5xl md:text-6xl font-black text-base-content mb-6 tracking-tight">
                    Torneos de <span class="text-primary">Pádel</span>
                </h1>
                <p class="text-xl md:text-2xl text-base-content/60 font-medium mb-8 leading-relaxed">
                    Gestiona tus equipos, inscríbete y sigue los resultados en tiempo real.
                </p>
                {% if user.is_authenticated and user.tipo_usuario == 'ADMIN' %}
                    <div class="flex flex-col sm:flex-row justify-center gap-4">
                        <a href="{% url 'torneos:admin_crear' %}"
                           class="btn btn-primary btn-lg shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 gap-3">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 fill="none"
                                 viewBox="0 0 24 24"
                                 stroke-width="2"
                                 stroke="currentColor"
                                 class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                            </svg>
                            Crear Nuevo Torneo
                        </a>
                        <a href="{% url 'torneos:admin_list' %}"
                           class="btn btn-outline btn-lg hover:bg-base-200 gap-3">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                 fill="none"
                                 viewBox="0 0 24 24"
                                 stroke-width="2"
                                 stroke="currentColor"
                                 class="w-6 h-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75" />
                            </svg>
                            Administrar
                        </a>
                    </div>
                {% endif %}
            </div>
        </div>
        <!-- Torneos Abiertos -->
        {% if torneos_abiertos %}
            <section class="bg-base-200/50 p-6 md:p-8 rounded-3xl border border-base-300/50">
                <div class="flex items-center gap-4 mb-8">
                    <div class="w-12 h-12 rounded-2xl bg-success/10 flex items-center justify-center text-success shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             width="24"
                             height="24"
                             fill="none"
                             viewBox="0 0 24 24"
                             stroke-width="2"
                             stroke="currentColor"
                             class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10" />
                        </svg>
                    </div>
                    <div>
                        <h2 class="text-2xl font-bold text-base-content">Inscripciones Abiertas</h2>
                        <p class="text-sm text-base-content/60">Únete a los próximos torneos disponibles</p>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    {% for torneo in torneos_abiertos %}
                        <div class="card bg-base-100 shadow hover:shadow-xl transition-all duration-300 border border-base-content/5 h-full hover:-translate-y-1">
                            <div class="card-body p-6 flex flex-col h-full">
                                <div class="flex justify-between items-start mb-4">
                                    <h3 class="card-title text-xl font-bold line-clamp-2 min-h-[3.5rem]">{{ torneo.nombre }}</h3>
                                    <div class="badge badge-success gap-1 text-white font-medium shrink-0">Abierto</div>
                                </div>
                                <div class="flex flex-wrap gap-2 mb-6">
                                    <div class="badge badge-outline border-base-content/20">{{ torneo.division.nombre }}</div>
                                    {% if torneo.pk in torneos_inscritos_ids %}<div class="badge badge-info text-white">Inscrito</div>{% endif %}
                                </div>
                                <div class="space-y-3 text-sm text-base-content/70 mt-auto mb-6">
                                    <div class="flex items-center gap-3">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                             fill="none"
                                             viewBox="0 0 24 24"
                                             stroke-width="1.5"
                                             stroke="currentColor"
                                             class="w-5 h-5 opacity-70">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5" />
                                        </svg>
                                        <span>Inicio: <span class="font-medium text-base-content">{{ torneo.fecha_inicio|date:"d M Y" }}</span></span>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                             fill="none"
                                             viewBox="0 0 24 24"
                                             stroke-width="1.5"
                                             stroke="currentColor"
                                             class="w-5 h-5 opacity-70">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z" />
                                        </svg>
                                        <span>Cupos: <span class="font-medium text-base-content">{{ torneo.inscripciones.count }} / {{ torneo.cupos_totales }}</span></span>
                                    </div>
                                </div>
                                <div class="card-actions">
                                    {% if not user.is_staff %}
                                        {% if torneo.pk in torneos_inscritos_ids %}
                                            <a href="{% url 'torneos:detail' torneo.pk %}"
                                               class="btn btn-info text-white w-full shadow-sm hover:shadow">Ver Detalles</a>
                                        {% else %}
                                            <a href="{% url 'torneos:detail' torneo.pk %}"
                                               class="btn btn-primary text-white w-full shadow-sm hover:shadow">Ver e Inscribirse</a>
                                        {% endif %}
                                    {% endif %}
                                    {% if user.is_staff %}
                                        <a href="{% url 'torneos:admin_manage' torneo.pk %}"
                                           class="btn btn-outline btn-sm w-full">Gestionar</a>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </section>
        {% endif %}
        <!-- Torneos en Juego -->
        {% if torneos_en_juego %}
            <section class="bg-base-200/50 p-6 md:p-8 rounded-3xl border border-base-300/50">
                <div class="flex items-center gap-4 mb-8">
                    <div class="w-12 h-12 rounded-2xl bg-info/10 flex items-center justify-center text-info shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             width="24"
                             height="24"
                             fill="none"
                             viewBox="0 0 24 24"
                             stroke-width="2"
                             stroke="currentColor"
                             class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0" />
                        </svg>
                    </div>
                    <div>
                        <h2 class="text-2xl font-bold text-base-content">Jugando Ahora</h2>
                        <p class="text-sm text-base-content/60">Sigue los resultados y clasificaciones en vivo</p>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-3 gap-6">
                    {% for torneo in torneos_en_juego %}
                        <div class="card bg-base-100 shadow hover:shadow-xl transition-all duration-300 border border-base-content/5 h-full hover:-translate-y-1">
                            <div class="card-body p-6 flex flex-col h-full">
                                <div class="flex justify-between items-start mb-4">
                                    <h3 class="card-title text-xl font-bold line-clamp-2 min-h-[3.5rem]">{{ torneo.nombre }}</h3>
                                    <div class="badge badge-info gap-1 text-white font-medium shrink-0">En Juego</div>
                                </div>
                                <div class="flex flex-wrap gap-2 mt-auto mb-8">
                                    <div class="badge badge-outline border-base-content/20">{{ torneo.division.nombre }}</div>
                                    {% if torneo.pk in torneos_inscritos_ids %}<div class="badge badge-success text-white">Jugando</div>{% endif %}
                                </div>
                                <div class="card-actions mt-auto">
                                    <a href="{% url 'torneos:detail' torneo.pk %}"
                                       class="btn btn-outline btn-info w-full hover:shadow">
                                        Ver Brackets y Resultados
                                    </a>
                                    {% if user.is_staff %}
                                        <a href="{% url 'torneos:admin_manage' torneo.pk %}"
                                           class="btn btn-sm btn-ghost w-full">Cargar Resultados</a>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </section>
        {% endif %}
        <!-- Estado Vacío -->
        {% if not torneos_abiertos and not torneos_en_juego %}
            <div class="hero bg-base-200 rounded-box py-12">
                <div class="hero-content text-center">
                    <div class="max-w-md">
                        <h1 class="text-3xl font-bold text-base-content/50">No hay torneos activos</h1>
                        {% if user.is_staff %}
                            <a href="{% url 'torneos:admin_crear' %}" class="btn btn-primary mt-4">Crear Torneo</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
{% endblock %}
